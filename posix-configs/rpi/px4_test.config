#!/bin/sh
# PX4 commands need the 'px4-' prefix in bash.
# (px4-alias.sh is expected to be in the PATH)
. px4-alias.sh

# navio config for a quad
uorb start
if [ -f eeprom/parameters ]
then
	param load
fi

dataman start
mpu9250 -s -R 10 start
ms5611 -I start
navio_rgbled start
navio_adc start
navio_adc test
navio_sysfs_rc_in start
linux_pwm_out start
gps start -d /dev/spidev0.0 -i spi -p ubx

battery_status start
sensors start
commander start
navigator start
ekf2 start
land_detector start multicopter
mc_pos_control start
mc_att_control start

logger start -t -b 200

mavlink start -x -u 14556 -r 1000000
mavlink boot_complete

sleep 5

ver all
sleep 1
commander check
sleep 1
dataman status
sleep 1
ekf2 status
sleep 1
logger status
sleep 1
mavlink status
sleep 1
mavlink status streams
sleep 1
param status
sleep 1
pwm info
sleep 1
battery_status status
sleep 1
sensors status
sleep 1
gps status
sleep 1
perf
sleep 1
perf latency
sleep 1
listener sensor_accel
sleep 1
listener sensor_gyro
sleep 1
listener sensor_gps
sleep 1
listener battery_status
sleep 1
work_queue status
sleep 1
uorb top -1
sleep 1

shutdown
